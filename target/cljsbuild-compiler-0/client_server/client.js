// Compiled by ClojureScript 0.0-2173
goog.provide('client_server.client');
goog.require('cljs.core');
goog.require('domina.events');
goog.require('domina.events');
goog.require('domina');
goog.require('domina');
goog.require('goog.net.XhrIo');
goog.require('goog.net.XhrIo');
client_server.client.resultuser_id = "evaluser-result";
client_server.client.resultpass_id = "evalpass-result";
client_server.client.uname_id = "eval-uname";
client_server.client.pass_id = "eval-pass";
client_server.client.url = "/eval";
client_server.client.url1 = "/evalpass";
client_server.client.serialize = (function serialize(m){return [cljs.core.str(m)].join('');
});
client_server.client.de_serialize = (function de_serialize(s){return reader.read_string.call(null,s);
});
client_server.client.receive_result = (function receive_result(event){return domina.set_text_BANG_.call(null,domina.by_id.call(null,client_server.client.resultpass_id),event.target.getResponseText());
});
client_server.client.receiveuser_result = (function receiveuser_result(event){return domina.set_text_BANG_.call(null,domina.by_id.call(null,client_server.client.resultuser_id),event.target.getResponseText());
});
client_server.client.post_for_eval = (function post_for_eval(expr_str){return goog.net.XhrIo.send(client_server.client.url,client_server.client.receiveuser_result,"POST",expr_str);
});
client_server.client.post_for_evalpass = (function post_for_evalpass(expr_str){return goog.net.XhrIo.send(client_server.client.url1,client_server.client.receive_result,"POST",expr_str);
});
client_server.client.get_expr = (function get_expr(){return client_server.client.serialize.call(null,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"user","user",1017503549),domina.by_id.call(null,client_server.client.uname_id).value], null));
});
client_server.client.getpass_expr = (function getpass_expr(){return client_server.client.serialize.call(null,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"pass","pass",1017337731),domina.by_id.call(null,client_server.client.pass_id).value], null));
});
client_server.client.main = (function main(){domina.events.listen_BANG_.call(null,domina.by_id.call(null,client_server.client.uname_id),new cljs.core.Keyword(null,"keyup","keyup",1115849900),(function (event){client_server.client.post_for_eval.call(null,client_server.client.get_expr.call(null));
return domina.events.stop_propagation.call(null,event);
}));
return domina.events.listen_BANG_.call(null,domina.by_id.call(null,client_server.client.pass_id),new cljs.core.Keyword(null,"keyup","keyup",1115849900),(function (event){client_server.client.post_for_evalpass.call(null,client_server.client.getpass_expr.call(null));
return domina.events.stop_propagation.call(null,event);
}));
});
goog.exportSymbol('client_server.client.main', client_server.client.main);
